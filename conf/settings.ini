#!/system/bin/sh


# ==============================================================================
#                           Flux Settings Configuration
# ==============================================================================
# Note: Restart service after modifying this file
# Usage: These settings override defaults in flux.config
# ==============================================================================


# ==============================================================================
# [ Subscription ]
# ==============================================================================

SUBSCRIPTION_URL=""


# ==============================================================================
# [ Logging ]
# ==============================================================================

# 0=OFF, 1=Error, 2=Warn, 3=Info, 4=Debug
LOG_LEVEL=3

# Max log size before rotation (bytes)
LOG_MAX_SIZE=1048576


# ==============================================================================
# [ Timeouts ]
# ==============================================================================

# Subscription download timeout (seconds)
UPDATE_TIMEOUT=15

# Download retry count
RETRY_COUNT=2

# Auto-update interval (seconds, 86400=24h)
UPDATE_INTERVAL=86400


# ==============================================================================
# [ Routing ]
# ==============================================================================

# Fwmark for routing (empty=use OWNER match)
ROUTING_MARK="2025"



# ==============================================================================
# [ Proxy Mode ]
# ==============================================================================

# 0=Auto, 1=TProxy, 2=Redirect
PROXY_MODE=0

# 0=Disable, 1=TProxy, 2=Redirect
DNS_HIJACK_ENABLE=1


# ==============================================================================
# [ Network Interfaces ]
# ==============================================================================

# Mobile data interface
MOBILE_INTERFACE="rmnet_data+"

# WiFi interface
WIFI_INTERFACE="wlan0"

# Hotspot interface
HOTSPOT_INTERFACE="wlan2"

# USB tethering interface
USB_INTERFACE="rndis+"


# ==============================================================================
# [ Proxy Scope ]
# ==============================================================================

# Interface proxy switches (0=Bypass, 1=Proxy)
PROXY_MOBILE=1
PROXY_WIFI=1
PROXY_HOTSPOT=0
PROXY_USB=0

# Protocol switches (0=Disable, 1=Enable)
PROXY_TCP=1
PROXY_UDP=1
PROXY_IPV6=0


# ==============================================================================
# [ Per-App Proxy ]
# ==============================================================================

# 0=Disable, 1=Enable
APP_PROXY_ENABLE=0

# 1=Blacklist (bypass specified apps), 2=Whitelist (proxy only specified apps)
APP_PROXY_MODE=1

# Package names - supports multi-line values in quotes
# Single line example:
#   PROXY_APPS_LIST="com.app1 com.app2"
#
# Multi-line example (newlines INSIDE quotes):
#   PROXY_APPS_LIST="com.google.android.youtube
#   com.twitter.android
#   com.instagram.android"
#
PROXY_APPS_LIST=""
BYPASS_APPS_LIST=""


# ==============================================================================
# [ China IP Bypass ]
# ==============================================================================

# 0=Disable, 1=Enable
BYPASS_CN_IP=0

# Download sources (files stored in $RUN_DIR automatically)
CN_IP_URL="https://raw.githubusercontent.com/Hackl0us/GeoIP2-CN/release/CN-ip-cidr.txt"
CN_IPV6_URL="https://ispip.clang.cn/all_cn_ipv6.txt"


# ==============================================================================
# [ MAC Filter ] (Hotspot only)
# ==============================================================================

# 0=Disable, 1=Enable
MAC_FILTER_ENABLE=0

# 1=Blacklist (bypass specified MACs), 2=Whitelist (proxy only specified MACs)
MAC_PROXY_MODE=1

# MAC addresses (space-separated, format: AA:BB:CC:DD:EE:FF)
# MACs to proxy (whitelist mode)
PROXY_MACS_LIST=""

# MACs to bypass (blacklist mode)
BYPASS_MACS_LIST=""


# ==============================================================================
# [ Advanced Settings ]
# ==============================================================================

# Skip kernel feature check (use if /proc/config.gz is unavailable)
# 0=Check, 1=Skip
SKIP_CHECK_FEATURE=0
