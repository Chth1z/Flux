#!/system/bin/sh


# ==============================================================================
#                           Flux Settings Configuration
# ==============================================================================
# Note: Restart service after modifying this file
# Usage: These settings override internal defaults
# ==============================================================================


# ==============================================================================
# [ Updater Configuration ]
# ==============================================================================

# Subscription URL (sing-box compatible)
SUBSCRIPTION_URL=""

# Subscription download timeout (seconds)
UPDATE_TIMEOUT=5

# Download retry count
RETRY_COUNT=2

# Auto-update interval (seconds, 86400=24h, 0=Disable)
UPDATE_INTERVAL=864000

# Cleanup Emoji from node names (0: Keep, 1: Remove)
PREF_CLEANUP_EMOJI=1


# ==============================================================================
# [ Logging & Debugging ]
# ==============================================================================

# 0=OFF, 1=Error, 2=Warn, 3=Info, 4=Debug
LOG_LEVEL=3

# Max log size before rotation (bytes)
LOG_MAX_SIZE=1048576


# ==============================================================================
# [ Core Process ]
# ==============================================================================

# Execution user/group for sing-box
CORE_USER="root"
CORE_GROUP="root"

# Core startup timeout (seconds)
CORE_TIMEOUT=5


# ==============================================================================
# [ Network Interfaces ]
# ==============================================================================

# Interface names (Support wildcard +)
MOBILE_INTERFACE="rmnet_data+"
WIFI_INTERFACE="wlan0"
HOTSPOT_INTERFACE="wlan2"
USB_INTERFACE="rndis+"


# ==============================================================================
# [ Tethering & Hotspot ]
# ==============================================================================

# Hotspot IP Ranges
HOTSPOT_V4_RANGE="192.168.43.0/24"
HOTSPOT_V6_RANGE="fe80::/10"


# ==============================================================================
# [ Proxy Granularity ]
# ==============================================================================

# Interface switches (0=Bypass, 1=Proxy)
PROXY_MOBILE=1
PROXY_WIFI=1
PROXY_HOTSPOT=1
PROXY_USB=1

# Protocol switches (deprecated - now protocol-agnostic)
PROXY_IPV6=0


# ==============================================================================
# [ Network & Routing ]
# ==============================================================================

# IPTables Table ID
TABLE_ID=2025

# IPTables Mark
IPV4_MARK=0x14
IPV6_MARK=0x19
BYPASS_MARK=0x11

# Core/Bypass Routing Mark (empty=use UID owner match)
ROUTING_MARK=""


# ==============================================================================
# [ Application Filtering ]
# ==============================================================================

# 0=Disable, 1=Blacklist (bypass specified apps), 2=Whitelist (proxy only specified apps)
APP_PROXY_MODE=0

# Package names - supports multi-line values in quotes
# Example (newlines INSIDE quotes):
# APP_LIST="com.google.android.youtube
# com.twitter.android
# com.instagram.android"
APP_LIST=""


# ==============================================================================
# [ Performance & Compatibility ]
# ==============================================================================

# Skip kernel feature check: 0=Check, 1=Skip
SKIP_CHECK_FEATURE=0

# Advanced: TCP MSS Clamping to fix carrier network connectivity: 0=Disable, 1=Enable
MSS_CLAMP_ENABLE=1

# List of interfaces to EXPLICITLY ignore (Space-separated)
# Example: EXCLUDE_INTERFACES="rmnet_data1 rmnet_data8"
EXCLUDE_INTERFACES=""
